# Выбор локации для скважины

![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![License](https://img.shields.io/badge/license-MIT-blue)
![Python](https://img.shields.io/badge/python-3.8%2B-blue)

Проект для выбора наиболее подходящего региона для разработки нефтяных скважин с использованием моделей машинного обучения для предсказания объёмов нефти, анализа потенциальной прибыли и оценки рисков.

## Содержание
- [Цель исследования](#цель-исследования)
- [План исследования](#план-исследования)
- [Шаги для выбора локации](#шаги-для-выбора-локации)
- [Условия задачи](#условия-задачи)
- [Описание данных](#описание-данных)
- [Общий вывод по исследованию](#общий-вывод-по-исследованию)
- [Авторы](#авторы)
- [Лицензия](#лицензия)

## Цель исследования
Цель исследования — выбрать наиболее подходящий регион для разработки нефтяных скважин. Необходимо построить модель машинного обучения, которая сможет предсказать объём нефти в каждой скважине, и провести анализ потенциальной прибыли и рисков, связанных с разработкой каждого региона. Основная задача заключается в выборе региона, который принесёт максимальную прибыль при минимальном риске.

## План исследования

1. **Загрузка и подготовка данных**:
   - Загрузить данные по трём регионам.
   - Разделить данные на обучающую и валидационную выборки в пропорции 75:25.

2. **Обучение модели для каждого региона**:
   - Обучить модель линейной регрессии на каждом регионе.
   - Провести предсказания на валидационной выборке и сохранить результаты.
   - Оценить качество модели по среднему значению предсказаний и метрике RMSE.

3. **Подготовка к расчёту прибыли**:
   - Рассчитать минимальный объём нефти для безубыточной разработки.
   - Сравнить средний объём нефти в каждом регионе с безубыточным уровнем.

4. **Расчёт прибыли**:
   - Выбрать 200 скважин с максимальными прогнозами объёмов нефти для каждого региона.
   - Рассчитать суммарный объём нефти и прибыль для каждой группы скважин.

5. **Анализ рисков**:
   - Применить технику Bootstrap для оценки распределения прибыли и рисков.
   - Определить среднюю прибыль, доверительный интервал и вероятность убытков.

6. **Вывод**:
   - Сделать заключение о выборе региона с наибольшей средней прибылью и минимальными рисками.

## Шаги для выбора локации

1. Собрать данные о характеристиках скважин в каждом регионе (качество нефти и объём запасов).
2. Построить модель для предсказания объёма запасов нефти.
3. Выбрать 200 скважин с наибольшими прогнозируемыми объёмами.
4. Рассчитать суммарную прибыль от выбранных скважин.
5. Проанализировать риски и определить регион с наибольшей потенциальной прибылью.

## Условия задачи

1. Для обучения модели используется только линейная регрессия.
2. В каждом регионе исследуется 500 скважин, из которых выбирается 200 для разработки.
3. Бюджет на разработку составляет 10 миллиардов рублей.
4. Прибыль с одного барреля нефти составляет 450 тысяч рублей.
5. Необходимо выбрать регион, в котором вероятность убытков меньше 2.5%.

## Описание данных

- **id** — уникальный идентификатор скважины.
- **f0, f1, f2** — три признака, характеризующие скважину (например, физические или химические параметры).
- **product** — объём нефти в скважине (в тысячах баррелей).

Данные представлены по трём регионам, и необходимо определить, в каком из них разработка будет наиболее выгодной.

## Общий вывод по исследованию

В ходе исследования была разработана модель машинного обучения для определения наиболее прибыльного региона для добычи нефти. Проведенный анализ с использованием метода Bootstrap позволил сделать следующие выводы:

### Рекомендованный регион для разработки — регион 2:

- **Низкий риск убытков**: всего 0.2% (по сравнению с 2.6% в первом регионе и 2.8% в третьем).
- **Ожидаемая средняя прибыль**: около 632 млн (против 615 млн в первом регионе и 572 млн в третьем).

### Этапы исследования

1. **Загрузка и подготовка данных**:
   - Выполнен импорт необходимых библиотек и загрузка трёх датасетов: `first_geo`, `second_geo`, `third_geo`.
   - Реализована функция `get_info` для проверки данных: проверены типы данных, выявлены и удалены неявные дубликаты, а также подтверждено отсутствие пропусков и явных дубликатов.
   - Из столбца `id` удалены неявные дубликаты: 10 строк из `first_geo`, 4 строки из `second_geo` и 4 строки из `third_geo`.

2. **Подготовка данных для обучения модели**:
   - Выделены признаки и целевая переменная, а также выполнена индексация данных.

3. **Обучение и проверка модели**:
   - Создан пайплайн для обучения модели `LinearRegression`, которая:
     - Исключает ненужные столбцы, разделяет данные на обучающую и валидационную выборки (75:25) и применяет стандартизацию количественных признаков.
     - Обучает модель и предсказывает средний объём нефти для каждого региона, выводит средний запас и RMSE.
   - Модель на втором регионе показала лучшую точность (RMSE: 0.89).
   - Наибольший средний запас нефти наблюдается в третьем регионе: 94.93 тыс. баррелей.

4. **Подготовка к расчёту прибыли**:
   - Установлены ключевые константы исследования и рассчитан порог безубыточности: 111.11 тыс. баррелей.
   - Средние запасы сырья для всех регионов ниже порога безубыточности, что указывает на потенциальные риски.
   - Создана функция `revenue_all_region_bootstrap` для расчёта прибыли от лучших скважин.

5. **Расчёт прибыли и анализ рисков**:
   - Проведен Bootstrap-анализ: создано 1000 выборок по 500 скважин для оценки метрик.
   - **Рекомендация — второй регион**:
     - Средняя прибыль: 632 млн рублей.
     - Доверительный интервал: от 168 до 1140 млн рублей.
     - Риск убытка: 0.2%.

## Авторы

- Алексей Бородулин - [GitHub](https://github.com/AlexeyBoroda)

## Лицензия

Этот проект лицензирован по лицензии MIT. Подробнее см. [LICENSE](LICENSE).
